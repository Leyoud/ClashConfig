---
# Download https://raw.fgit.cf/Leyoud/LEYOUD/master/Clash/user_config_ChineseMainland.yaml
#
#-------------------------------------------------------------#
# General
mixed-port: 7890
external-ui: ./
log-level: info
allow-lan: false
bind-address: '*'
external-controller: 127.0.0.1:9090
secret: ''
ipv6: false
#-------------------------------------------------------------#
# Profiles
mode: rule
authentication: []

hosts:
    hanime1.me: 172.67.69.183
    '+.hanime1.me': 104.26.1.18

dns:
    enable: true
    listen: 0.0.0.0:53
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    use-hosts: true
    nameserver:
        # - 223.6.6.6
        # - 223.5.5.5
        - tls://dns.alidns.com:853
        - https://dns.alidns.com/dns-query
    fake-ip-filter:
        - +.stun.*.*
        - +.stun.*.*.*
        - +.stun.*.*.*.*
        - +.stun.*.*.*.*.*
        - '*.n.n.srv.nintendo.net'
        - +.stun.playstation.net
        - xbox.*.*.microsoft.com
        - '*.*.xboxlive.com'
        - '*.msftncsi.com'
        - '*.msftconnecttest.com'
        - WORKGROUP

tun:
    enable: true
    stack: gvisor
    auto-route: true
    auto-detect-interface: true
    dns-hijack:
        - any:53

proxies:
    - { name: ğŸ¶ è§£é”ç½‘æ˜“äº‘ç°è‰²æ­Œæ›²(æœ¬åœ°), type: http, server: 127.0.0.1, port: 8080 } # unblockneteasemusic server

proxy-groups:
    - name: ğŸ¶ ç½‘æ˜“éŸ³ä¹
      type: select
      proxies:
          - DIRECT
          - ğŸ¶ è§£é”ç½‘æ˜“äº‘ç°è‰²æ­Œæ›²(æœ¬åœ°)
    - name: ğŸ¯ å…¨çƒç›´è¿
      type: select
      proxies:
          - DIRECT
          - REJECT
    - name: ğŸ† å…¨çƒæ‹¦æˆª
      type: select
      proxies:
          - REJECT
          - DIRECT

rule-providers:
    # ç½‘æ˜“éŸ³ä¹
    NeteaseMusic:
        type: http
        behavior: classical
        path: ./providers/rule/NetEaseMusic.yaml
        url: https://raw.fgit.cf/blackmatrix7/ios_rule_script/master/rule/Clash/NetEaseMusic/NetEaseMusic.yaml
        interval: 86400

    # å…¨çƒç›´è¿åˆ—è¡¨
    # Start
    Lan:
        type: http
        behavior: classical
        path: ./providers/rule/Lan.yaml
        url: https://raw.fgit.cf/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml
        interval: 86400

    ProcessNameDirectlist:
        type: http
        behavior: classical
        path: ./providers/rule/ProcessNameDirectlist.yaml
        url: https://raw.fgit.cf/Leyoud/Rules/master/ProcessNameDirectlist.yaml
        interval: 86400

    ChinaIPs:
        type: http
        behavior: classical
        path: ./providers/rule/ChinaIPs.yaml
        url: https://raw.fgit.cf/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_Classical.yaml
        interval: 86400

    Download:
        type: http
        behavior: classical
        path: ./providers/rule/Download.yaml
        url: https://raw.fgit.cf/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml
        interval: 86400
    # End

    # å…¨çƒå¹¿å‘Šæ‹¦æˆª
    Advertising:
        type: http
        behavior: classical
        path: ./providers/rule/Advertising.yaml
        url: https://raw.fgit.cf/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical.yaml
        interval: 86400

rules:
    - RULE-SET,Lan,DIRECT
    - RULE-SET,ProcessNameDirectlist,DIRECT
    - RULE-SET,Advertising,ğŸ† å…¨çƒæ‹¦æˆª
    - PROCESS-NAME,cloudmusic.exe,ğŸ¶ ç½‘æ˜“éŸ³ä¹
    - PROCESS-NAME,com.netease.cloudmusic,ğŸ¶ ç½‘æ˜“éŸ³ä¹
    - RULE-SET,NeteaseMusic,ğŸ¶ ç½‘æ˜“éŸ³ä¹
    - RULE-SET,ChinaIPs,ğŸ¯ å…¨çƒç›´è¿,no-resolve
    - RULE-SET,Download,ğŸ¯ å…¨çƒç›´è¿
    - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
    - MATCH,ğŸ¯ å…¨çƒç›´è¿
